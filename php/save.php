<?php
include 'connect.php';

if($link){
	$userId = $_POST["userId"];
	$perfs = $_POST["perfs"];
	// $userId = 13;
	// $perfs = '[{"systemOptions":{"clickable":[true,true,true,true,true,true,true],"tonic":"random","temperament":"equal","A":220},"attempts":[[{"cents":-19,"time":0.5630839002267574},{"cents":5,"time":0.5746938775510204},{"cents":-18,"time":0.6095238095238096},{"cents":4,"time":0.626938775510204},{"cents":-16,"time":0.6443537414965986},{"cents":-18,"time":0.6733786848072563},{"cents":-16,"time":0.6907936507936508},{"cents":4,"time":0.7256235827664399},{"cents":-11,"time":0.7430385487528345},{"cents":4,"time":0.7604535147392291},{"cents":3,"time":0.7952834467120181},{"cents":-14,"time":0.8068934240362812},{"cents":4,"time":0.8475283446712019},{"cents":-14,"time":0.8591383219954648},{"cents":3,"time":0.8765532879818594},{"cents":-17,"time":0.9113832199546485},{"cents":-18,"time":0.9287981859410431},{"cents":-16,"time":0.9462131519274376},{"cents":-13,"time":1.0274829931972789},{"cents":311,"time":1.5789569160997732},{"cents":9,"time":1.5963718820861679},{"cents":4,"time":1.6312018140589568},{"cents":5,"time":1.6428117913832199},{"cents":-20,"time":1.677641723356009},{"cents":5,"time":1.6950566893424037},{"cents":6,"time":1.7124716553287982},{"cents":-7601,"time":1.7473015873015874},{"cents":-4800,"time":1.7647165532879818},{"cents":-19,"time":1.811156462585034},{"cents":4,"time":1.8285714285714285},{"cents":-20,"time":1.8634013605442177},{"cents":-16,"time":1.8808163265306121},{"cents":-20,"time":1.9156462585034013},{"cents":-16,"time":1.9272562358276644},{"cents":4,"time":1.944671201814059},{"cents":-13,"time":1.979501133786848},{"cents":3,"time":1.9969160997732427},{"cents":4,"time":2.014331065759637},{"cents":3,"time":2.049160997732426},{"cents":3,"time":2.0607709750566894},{"cents":977,"time":2.316190476190476},{"cents":8,"time":2.345215419501134},{"cents":6,"time":2.3626303854875284},{"cents":-22,"time":2.3974603174603173},{"cents":5,"time":2.414875283446712}],[{"cents":-19,"time":2.4322902494331067},{"cents":-16,"time":2.461315192743764},{"cents":-12,"time":2.5309750566893423},{"cents":4,"time":2.5483900226757368},{"cents":-14,"time":2.583219954648526},{"cents":4,"time":2.6006349206349206},{"cents":3,"time":2.6354648526077096},{"cents":-14,"time":2.647074829931973},{"cents":3,"time":2.6644897959183673},{"cents":3,"time":2.6993197278911563},{"cents":-18,"time":2.716734693877551},{"cents":-16,"time":2.7341496598639456},{"cents":-14,"time":2.7689795918367346},{"cents":4,"time":2.780589569160998},{"cents":4,"time":2.815419501133787},{"cents":39,"time":2.885079365079365},{"cents":188,"time":2.896689342403628},{"cents":189,"time":2.9315192743764173},{"cents":203,"time":2.948934240362812},{"cents":202,"time":2.9663492063492063},{"cents":204,"time":3.0011791383219957},{"cents":204,"time":3.01859410430839},{"cents":203,"time":3.0476190476190474},{"cents":204,"time":3.0650340136054424},{"cents":203,"time":3.082448979591837},{"cents":203,"time":3.1172789115646258},{"cents":203,"time":3.1346938775510202},{"cents":203,"time":3.163718820861678},{"cents":203,"time":3.1811337868480725},{"cents":203,"time":3.198548752834467},{"cents":203,"time":3.2333786848072563},{"cents":188,"time":3.250793650793651},{"cents":203,"time":3.2682086167800453},{"cents":203,"time":3.297233560090703},{"cents":203,"time":3.3146485260770975},{"cents":188,"time":3.3494784580498864},{"cents":203,"time":3.3668934240362813},{"cents":188,"time":3.8835374149659865},{"cents":204,"time":3.900952380952381},{"cents":189,"time":3.9183673469387754},{"cents":203,"time":3.953197278911565},{"cents":204,"time":3.9706122448979593},{"cents":189,"time":3.9996371882086166},{"cents":203,"time":4.017052154195011}],[{"cents":189,"time":4.0344671201814055},{"cents":189,"time":4.069297052154195},{"cents":203,"time":4.08671201814059},{"cents":203,"time":4.121541950113379},{"cents":204,"time":4.133151927437642},{"cents":203,"time":4.1505668934240365},{"cents":203,"time":4.1853968253968254},{"cents":202,"time":4.20281179138322},{"cents":203,"time":4.220226757369614},{"cents":204,"time":4.255056689342403},{"cents":203,"time":4.266666666666667},{"cents":205,"time":4.3014965986394555},{"cents":189,"time":4.31891156462585},{"cents":204,"time":4.3363265306122445},{"cents":403,"time":4.533696145124717},{"cents":402,"time":4.551111111111111},{"cents":403,"time":4.568526077097506},{"cents":402,"time":4.6033560090702945},{"cents":402,"time":4.620770975056689},{"cents":402,"time":4.6381859410430835},{"cents":403,"time":4.673015873015873},{"cents":401,"time":4.690430839002268},{"cents":402,"time":4.7194557823129255},{"cents":402,"time":4.73687074829932},{"cents":403,"time":4.7542857142857144},{"cents":402,"time":4.789115646258503},{"cents":402,"time":4.806530612244898},{"cents":402,"time":4.835555555555556},{"cents":403,"time":4.85297052154195},{"cents":402,"time":4.8703854875283445},{"cents":403,"time":4.9052154195011335},{"cents":401,"time":4.922630385487528},{"cents":402,"time":4.940045351473923},{"cents":402,"time":4.96907029478458},{"cents":402,"time":4.986485260770975}],[{"cents":499,"time":6.275192743764173},{"cents":498,"time":6.292607709750567},{"cents":499,"time":6.3100226757369615},{"cents":499,"time":6.339047619047619},{"cents":498,"time":6.356462585034014},{"cents":499,"time":6.391292517006803},{"cents":498,"time":6.408707482993197},{"cents":499,"time":6.426122448979592},{"cents":498,"time":6.455147392290249},{"cents":498,"time":6.472562358276644},{"cents":498,"time":6.507392290249433},{"cents":499,"time":6.524807256235827},{"cents":498,"time":6.542222222222223},{"cents":498,"time":6.5770521541950115},{"cents":498,"time":6.594467120181406},{"cents":499,"time":6.623492063492064},{"cents":499,"time":6.640907029478458},{"cents":499,"time":6.658321995464853},{"cents":498,"time":6.693151927437642},{"cents":499,"time":6.710566893424036},{"cents":499,"time":6.727981859410431}],[{"cents":702,"time":7.546485260770975},{"cents":700,"time":7.575510204081633},{"cents":701,"time":7.592925170068027},{"cents":700,"time":7.610340136054422},{"cents":701,"time":7.645170068027211},{"cents":701,"time":7.662585034013605},{"cents":701,"time":7.68},{"cents":700,"time":7.7148299319727895},{"cents":700,"time":7.726439909297052},{"cents":701,"time":7.761269841269841},{"cents":701,"time":7.778684807256236},{"cents":701,"time":7.796099773242631},{"cents":701,"time":7.83092970521542},{"cents":701,"time":7.842539682539683},{"cents":701,"time":7.877369614512472},{"cents":700,"time":7.894784580498866},{"cents":700,"time":7.912199546485261},{"cents":701,"time":7.94702947845805},{"cents":702,"time":7.964444444444444},{"cents":701,"time":7.993469387755102},{"cents":700,"time":8.010884353741497}],[{"cents":904,"time":8.730702947845804},{"cents":901,"time":8.7481179138322},{"cents":900,"time":8.782947845804989},{"cents":902,"time":8.800362811791382},{"cents":902,"time":8.817777777777778},{"cents":901,"time":8.846802721088435},{"cents":900,"time":8.864217687074829},{"cents":901,"time":8.89904761904762},{"cents":902,"time":8.916462585034013},{"cents":901,"time":8.933877551020409},{"cents":901,"time":8.962902494331066},{"cents":900,"time":8.98031746031746},{"cents":900,"time":9.015147392290249},{"cents":901,"time":9.032562358276644},{"cents":900,"time":9.049977324263038},{"cents":901,"time":9.084807256235827},{"cents":901,"time":9.096417233560091},{"cents":900,"time":9.13124716553288},{"cents":901,"time":9.148662131519274},{"cents":901,"time":9.166077097505669},{"cents":901,"time":9.200907029478458}],[{"cents":903,"time":9.218321995464853},{"cents":1117,"time":9.984580498866213},{"cents":1097,"time":10.001995464852607},{"cents":1098,"time":10.036825396825396},{"cents":1097,"time":10.054240362811791},{"cents":1098,"time":10.071655328798187},{"cents":1098,"time":10.100680272108843},{"cents":1097,"time":10.118095238095238},{"cents":1097,"time":10.152925170068027},{"cents":1099,"time":10.170340136054422},{"cents":1097,"time":10.187755102040816},{"cents":1098,"time":10.216780045351474},{"cents":1097,"time":10.234195011337869},{"cents":1098,"time":10.269024943310658},{"cents":1098,"time":10.286439909297052},{"cents":1098,"time":10.303854875283447},{"cents":1097,"time":10.338684807256236},{"cents":1098,"time":10.350294784580498},{"cents":1097,"time":10.385124716553287},{"cents":1097,"time":10.402539682539683},{"cents":1098,"time":10.419954648526078},{"cents":1098,"time":10.454784580498867},{"cents":1099,"time":10.47219954648526}]],"assignment":1,"progress":[true,true,true,true,true,true,true],"correctFrames":0}]';
	$sql = 'UPDATE `userData` SET `data`=\''.$perfs.'\' WHERE `userId`='.$userId.';';
	//echo $sql;
	if ($result = mysqli_query($link, $sql)) {
		echo "success";

	    /* free result set */
	    mysqli_free_result($result);
	}
}
else{
	echo "not connected";
}

?>