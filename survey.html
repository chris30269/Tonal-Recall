<html>
<head>
	<title>Tonal Recall Survey</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
	<style type="text/css">
		#container{
			min-width: 50vw;
			width: 80vw;
			margin-left: 10vw;
		}
		td{
			text-align: center;
			width: 14%;
		}
		.question{
			font-weight: bold;
			text-align: left;
		}
		.followup{
			text-align: left;
		}
		table{
			width: 100%;
		}
		textarea{
			width: 50%;
		}
		hr{
			margin-top: 2vh;
			margin-bottom: 2vh;
		}
		button{
			width: 50%;
			margin-bottom: 10vh;
			margin-top: 10vh;
			padding: 2vh;
			font-size: 18px;
			margin-left: 25%;
		}
	</style>
</head>
<body>
	<div id="container">
		<p>Thank you for participating in this research study!</p>
		<p>This survey is 17 questions, but should take less than 5 minutes to complete and is very valuable for this research project!</p>
		<p>All questions are optional, and you can change your answers at any time by coming back to this page.</p>
		<p>After saving, you will be redirected back to the main page.</p>
		<hr>
		<p class="question">1. I already had a good sense of tonality, before using this system.</p>
		<table>
			<tr>
				<td><input type="radio" name="question1" value="1" id="question11"></td>
				<td><input type="radio" name="question1" value="2" id="question12"></td>
				<td><input type="radio" name="question1" value="3" id="question13"></td>
				<td><input type="radio" name="question1" value="4" id="question14"></td>
				<td><input type="radio" name="question1" value="5" id="question15"></td>
				<td><input type="radio" name="question1" value="6" id="question16"></td>
				<td><input type="radio" name="question1" value="7" id="question17"></td>
			</tr>
			<tr>
				<td><label for="question11">Strongly Disagree</label></td>
				<td><label for="question12">Disagree</label></td>
				<td><label for="question13">Somewhat Disagree</label></td>
				<td><label for="question14">Neither Agree nor Disagree</label></td>
				<td><label for="question15">Somewhat Agree</label></td>
				<td><label for="question16">Agree</label></td>
				<td><label for="question17">Strongly Agree</label></td>
			</tr>
		</table>
		<p class="followup">Explaination or other thoughts:</p>
		<textarea></textarea>

		<hr>
		<p class="question">2. I think my sense of tonality is better after using the system.</p>
		<table>
			<tr>
				<td><input type="radio" name="question2" value="1" id="question21"></td>
				<td><input type="radio" name="question2" value="2" id="question22"></td>
				<td><input type="radio" name="question2" value="3" id="question23"></td>
				<td><input type="radio" name="question2" value="4" id="question24"></td>
				<td><input type="radio" name="question2" value="5" id="question25"></td>
				<td><input type="radio" name="question2" value="6" id="question26"></td>
				<td><input type="radio" name="question2" value="7" id="question27"></td>
			</tr>
			<tr>
				<td><label for="question21">Strongly Disagree</label></td>
				<td><label for="question22">Disagree</label></td>
				<td><label for="question23">Somewhat Disagree</label></td>
				<td><label for="question24">Neither Agree nor Disagree</label></td>
				<td><label for="question25">Somewhat Agree</label></td>
				<td><label for="question26">Agree</label></td>
				<td><label for="question27">Strongly Agree</label></td>
			</tr>
		</table>
		<p class="followup">Explaination or other thoughts:</p>
		<textarea></textarea>

		<hr>
		<p class="question">3. I think my sense of tonality got better by the following percentage:</p>
		<input name="question3" type="number">%

		<hr>
		<p class="question">4. I would like to continue using this system to better my musicianship.</p>
		<table>
			<tr>
				<td><input type="radio" name="question4" value="1" id="question41"></td>
				<td><input type="radio" name="question4" value="2" id="question42"></td>
				<td><input type="radio" name="question4" value="3" id="question43"></td>
				<td><input type="radio" name="question4" value="4" id="question44"></td>
				<td><input type="radio" name="question4" value="5" id="question45"></td>
				<td><input type="radio" name="question4" value="6" id="question46"></td>
				<td><input type="radio" name="question4" value="7" id="question47"></td>
			</tr>
			<tr>
				<td><label for="question41">Strongly Disagree</label></td>
				<td><label for="question42">Disagree</label></td>
				<td><label for="question43">Somewhat Disagree</label></td>
				<td><label for="question44">Neither Agree nor Disagree</label></td>
				<td><label for="question45">Somewhat Agree</label></td>
				<td><label for="question46">Agree</label></td>
				<td><label for="question47">Strongly Agree</label></td>
			</tr>
		</table>
		<p class="followup">Explaination or other thoughts:</p>
		<textarea></textarea>

		<hr>
		<p class="question">5. I feel more confident in my sense of tonality after using the system.</p>
		<table>
			<tr>
				<td><input type="radio" name="question5" value="1" id="question51"></td>
				<td><input type="radio" name="question5" value="2" id="question52"></td>
				<td><input type="radio" name="question5" value="3" id="question53"></td>
				<td><input type="radio" name="question5" value="4" id="question54"></td>
				<td><input type="radio" name="question5" value="5" id="question55"></td>
				<td><input type="radio" name="question5" value="6" id="question56"></td>
				<td><input type="radio" name="question5" value="7" id="question57"></td>
			</tr>
			<tr>
				<td><label for="question51">Strongly Disagree</label></td>
				<td><label for="question52">Disagree</label></td>
				<td><label for="question53">Somewhat Disagree</label></td>
				<td><label for="question54">Neither Agree nor Disagree</label></td>
				<td><label for="question55">Somewhat Agree</label></td>
				<td><label for="question56">Agree</label></td>
				<td><label for="question57">Strongly Agree</label></td>
			</tr>
		</table>
		<p class="followup">Explaination or other thoughts:</p>
		<textarea></textarea>

		<hr>
		<p class="question">6. This system directly complements my musical goals.</p>
		<table>
			<tr>
				<td><input type="radio" name="question6" value="1" id="question61"></td>
				<td><input type="radio" name="question6" value="2" id="question62"></td>
				<td><input type="radio" name="question6" value="3" id="question63"></td>
				<td><input type="radio" name="question6" value="4" id="question64"></td>
				<td><input type="radio" name="question6" value="5" id="question65"></td>
				<td><input type="radio" name="question6" value="6" id="question66"></td>
				<td><input type="radio" name="question6" value="7" id="question67"></td>
			</tr>
			<tr>
				<td><label for="question61">Strongly Disagree</label></td>
				<td><label for="question62">Disagree</label></td>
				<td><label for="question63">Somewhat Disagree</label></td>
				<td><label for="question64">Neither Agree nor Disagree</label></td>
				<td><label for="question65">Somewhat Agree</label></td>
				<td><label for="question66">Agree</label></td>
				<td><label for="question67">Strongly Agree</label></td>
			</tr>
		</table>
		<p class="followup">Explaination or other thoughts:</p>
		<textarea></textarea>

		<hr>
		<p class="question">7. I think that I would like to use this system frequently.</p>
		<table>
			<tr>
				<td><input type="radio" name="question7" value="1" id="question71"></td>
				<td><input type="radio" name="question7" value="2" id="question72"></td>
				<td><input type="radio" name="question7" value="3" id="question73"></td>
				<td><input type="radio" name="question7" value="4" id="question74"></td>
				<td><input type="radio" name="question7" value="5" id="question75"></td>
				<td><input type="radio" name="question7" value="6" id="question76"></td>
				<td><input type="radio" name="question7" value="7" id="question77"></td>
			</tr>
			<tr>
				<td><label for="question71">Strongly Disagree</label></td>
				<td><label for="question72">Disagree</label></td>
				<td><label for="question73">Somewhat Disagree</label></td>
				<td><label for="question74">Neither Agree nor Disagree</label></td>
				<td><label for="question75">Somewhat Agree</label></td>
				<td><label for="question76">Agree</label></td>
				<td><label for="question77">Strongly Agree</label></td>
			</tr>
		</table>
		<p class="followup">Explaination or other thoughts:</p>
		<textarea></textarea>

		<hr>
		<p class="question">8. I found the system unnecessarily complex.</p>
		<table>
			<tr>
				<td><input type="radio" name="question8" value="1" id="question81"></td>
				<td><input type="radio" name="question8" value="2" id="question82"></td>
				<td><input type="radio" name="question8" value="3" id="question83"></td>
				<td><input type="radio" name="question8" value="4" id="question84"></td>
				<td><input type="radio" name="question8" value="5" id="question85"></td>
				<td><input type="radio" name="question8" value="6" id="question86"></td>
				<td><input type="radio" name="question8" value="7" id="question87"></td>
			</tr>
			<tr>
				<td><label for="question81">Strongly Disagree</label></td>
				<td><label for="question82">Disagree</label></td>
				<td><label for="question83">Somewhat Disagree</label></td>
				<td><label for="question84">Neither Agree nor Disagree</label></td>
				<td><label for="question85">Somewhat Agree</label></td>
				<td><label for="question86">Agree</label></td>
				<td><label for="question87">Strongly Agree</label></td>
			</tr>
		</table>
		<p class="followup">Explaination or other thoughts:</p>
		<textarea></textarea>

		<hr>
		<p class="question">9. I thought the system was easy to use.</p>
		<table>
			<tr>
				<td><input type="radio" name="question9" value="1" id="question91"></td>
				<td><input type="radio" name="question9" value="2" id="question92"></td>
				<td><input type="radio" name="question9" value="3" id="question93"></td>
				<td><input type="radio" name="question9" value="4" id="question94"></td>
				<td><input type="radio" name="question9" value="5" id="question95"></td>
				<td><input type="radio" name="question9" value="6" id="question96"></td>
				<td><input type="radio" name="question9" value="7" id="question97"></td>
			</tr>
			<tr>
				<td><label for="question91">Strongly Disagree</label></td>
				<td><label for="question92">Disagree</label></td>
				<td><label for="question93">Somewhat Disagree</label></td>
				<td><label for="question94">Neither Agree nor Disagree</label></td>
				<td><label for="question95">Somewhat Agree</label></td>
				<td><label for="question96">Agree</label></td>
				<td><label for="question97">Strongly Agree</label></td>
			</tr>
		</table>
		<p class="followup">Explaination or other thoughts:</p>
		<textarea></textarea>

		<hr>
		<p class="question">10. I think that I would need the support of a technical person to be able to use this system.</p>
		<table>
			<tr>
				<td><input type="radio" name="question10" value="1" id="question101"></td>
				<td><input type="radio" name="question10" value="2" id="question102"></td>
				<td><input type="radio" name="question10" value="3" id="question103"></td>
				<td><input type="radio" name="question10" value="4" id="question104"></td>
				<td><input type="radio" name="question10" value="5" id="question105"></td>
				<td><input type="radio" name="question10" value="6" id="question106"></td>
				<td><input type="radio" name="question10" value="7" id="question107"></td>
			</tr>
			<tr>
				<td><label for="question101">Strongly Disagree</label></td>
				<td><label for="question102">Disagree</label></td>
				<td><label for="question103">Somewhat Disagree</label></td>
				<td><label for="question104">Neither Agree nor Disagree</label></td>
				<td><label for="question105">Somewhat Agree</label></td>
				<td><label for="question106">Agree</label></td>
				<td><label for="question107">Strongly Agree</label></td>
			</tr>
		</table>
		<p class="followup">Explaination or other thoughts:</p>
		<textarea></textarea>

		<hr>
		<p class="question">11. I found the various functions in this system were well integrated.</p>
		<table>
			<tr>
				<td><input type="radio" name="question11" value="1" id="question111"></td>
				<td><input type="radio" name="question11" value="2" id="question112"></td>
				<td><input type="radio" name="question11" value="3" id="question113"></td>
				<td><input type="radio" name="question11" value="4" id="question114"></td>
				<td><input type="radio" name="question11" value="5" id="question115"></td>
				<td><input type="radio" name="question11" value="6" id="question116"></td>
				<td><input type="radio" name="question11" value="7" id="question117"></td>
			</tr>
			<tr>
				<td><label for="question111">Strongly Disagree</label></td>
				<td><label for="question112">Disagree</label></td>
				<td><label for="question113">Somewhat Disagree</label></td>
				<td><label for="question114">Neither Agree nor Disagree</label></td>
				<td><label for="question115">Somewhat Agree</label></td>
				<td><label for="question116">Agree</label></td>
				<td><label for="question117">Strongly Agree</label></td>
			</tr>
		</table>
		<p class="followup">Explaination or other thoughts:</p>
		<textarea></textarea>

		<hr>
		<p class="question">12. I thought there was too much inconsistency in this system.</p>
		<table>
			<tr>
				<td><input type="radio" name="question12" value="1" id="question121"></td>
				<td><input type="radio" name="question12" value="2" id="question122"></td>
				<td><input type="radio" name="question12" value="3" id="question123"></td>
				<td><input type="radio" name="question12" value="4" id="question124"></td>
				<td><input type="radio" name="question12" value="5" id="question125"></td>
				<td><input type="radio" name="question12" value="6" id="question126"></td>
				<td><input type="radio" name="question12" value="7" id="question127"></td>
			</tr>
			<tr>
				<td><label for="question121">Strongly Disagree</label></td>
				<td><label for="question122">Disagree</label></td>
				<td><label for="question123">Somewhat Disagree</label></td>
				<td><label for="question124">Neither Agree nor Disagree</label></td>
				<td><label for="question125">Somewhat Agree</label></td>
				<td><label for="question126">Agree</label></td>
				<td><label for="question127">Strongly Agree</label></td>
			</tr>
		</table>
		<p class="followup">Explaination or other thoughts:</p>
		<textarea></textarea>

		<hr>
		<p class="question">13. I would imagine that most people would learn to use this system very quickly.</p>
		<table>
			<tr>
				<td><input type="radio" name="question13" value="1" id="question131"></td>
				<td><input type="radio" name="question13" value="2" id="question132"></td>
				<td><input type="radio" name="question13" value="3" id="question133"></td>
				<td><input type="radio" name="question13" value="4" id="question134"></td>
				<td><input type="radio" name="question13" value="5" id="question135"></td>
				<td><input type="radio" name="question13" value="6" id="question136"></td>
				<td><input type="radio" name="question13" value="7" id="question137"></td>
			</tr>
			<tr>
				<td><label for="question131">Strongly Disagree</label></td>
				<td><label for="question132">Disagree</label></td>
				<td><label for="question133">Somewhat Disagree</label></td>
				<td><label for="question134">Neither Agree nor Disagree</label></td>
				<td><label for="question135">Somewhat Agree</label></td>
				<td><label for="question136">Agree</label></td>
				<td><label for="question137">Strongly Agree</label></td>
			</tr>
		</table>
		<p class="followup">Explaination or other thoughts:</p>
		<textarea></textarea>

		<hr>
		<p class="question">14. I found the system very cumbersome to use.</p>
		<table>
			<tr>
				<td><input type="radio" name="question14" value="1" id="question141"></td>
				<td><input type="radio" name="question14" value="2" id="question142"></td>
				<td><input type="radio" name="question14" value="3" id="question143"></td>
				<td><input type="radio" name="question14" value="4" id="question144"></td>
				<td><input type="radio" name="question14" value="5" id="question145"></td>
				<td><input type="radio" name="question14" value="6" id="question146"></td>
				<td><input type="radio" name="question14" value="7" id="question147"></td>
			</tr>
			<tr>
				<td><label for="question141">Strongly Disagree</label></td>
				<td><label for="question142">Disagree</label></td>
				<td><label for="question143">Somewhat Disagree</label></td>
				<td><label for="question144">Neither Agree nor Disagree</label></td>
				<td><label for="question145">Somewhat Agree</label></td>
				<td><label for="question146">Agree</label></td>
				<td><label for="question147">Strongly Agree</label></td>
			</tr>
		</table>
		<p class="followup">Explaination or other thoughts:</p>
		<textarea></textarea>

		<hr>
		<p class="question">15. I felt very confident using the system.</p>
		<table>
			<tr>
				<td><input type="radio" name="question15" value="1" id="question151"></td>
				<td><input type="radio" name="question15" value="2" id="question152"></td>
				<td><input type="radio" name="question15" value="3" id="question153"></td>
				<td><input type="radio" name="question15" value="4" id="question154"></td>
				<td><input type="radio" name="question15" value="5" id="question155"></td>
				<td><input type="radio" name="question15" value="6" id="question156"></td>
				<td><input type="radio" name="question15" value="7" id="question157"></td>
			</tr>
			<tr>
				<td><label for="question151">Strongly Disagree</label></td>
				<td><label for="question152">Disagree</label></td>
				<td><label for="question153">Somewhat Disagree</label></td>
				<td><label for="question154">Neither Agree nor Disagree</label></td>
				<td><label for="question155">Somewhat Agree</label></td>
				<td><label for="question156">Agree</label></td>
				<td><label for="question157">Strongly Agree</label></td>
			</tr>
		</table>
		<p class="followup">Explaination or other thoughts:</p>
		<textarea></textarea>

		<hr>
		<p class="question">16. I needed to learn a lot of things before I could get going with this system.</p>
		<table>
			<tr>
				<td><input type="radio" name="question16" value="1" id="question161"></td>
				<td><input type="radio" name="question16" value="2" id="question162"></td>
				<td><input type="radio" name="question16" value="3" id="question163"></td>
				<td><input type="radio" name="question16" value="4" id="question164"></td>
				<td><input type="radio" name="question16" value="5" id="question165"></td>
				<td><input type="radio" name="question16" value="6" id="question166"></td>
				<td><input type="radio" name="question16" value="7" id="question167"></td>
			</tr>
			<tr>
				<td><label for="question161">Strongly Disagree</label></td>
				<td><label for="question162">Disagree</label></td>
				<td><label for="question163">Somewhat Disagree</label></td>
				<td><label for="question164">Neither Agree nor Disagree</label></td>
				<td><label for="question165">Somewhat Agree</label></td>
				<td><label for="question166">Agree</label></td>
				<td><label for="question167">Strongly Agree</label></td>
			</tr>
		</table>
		<p class="followup">Explaination or other thoughts:</p>
		<textarea></textarea>

		<hr>
		<p class="question">17. Is there any other feedback or comments you would like to give?</p>
		<input name="question17" type="text" style="width:50%;">

		<br>
		<p>After saving, you will be redirected back to the main page.</p>
		<p>You can come back here and change your answers anytime.</p>
		<button>Save</button>
	</div>
</body>
<script type="text/javascript">
	$("button").first().on("click", function(){
		var selected = $("input:checked");
		var temp=[];
		for(var i = 0; i < selected.length; i++) {
			//temp[selected[i].name] = selected[i].value;
			var t = {};
			t[selected[i].name] = selected[i].value;
			temp.push(t);
		};
		if($("input[name=question3]").val()) temp.push({"question3":$("input[name=question3]").val()});
		if($("input[name=question17]").val()) temp.push({"question17":$("input[name=question17]").val()});
		var followups = $("textarea");
		var followupsTemp = [];
		for (var i = 0; i < followups.length; i++) {
			//if(i!=2){
				//followupsTemp["followup"+(i+1)] = $(followups[i]).val();
				var t = {};
				t["followup"+(i+1)] = $(followups[i]).val();
				followupsTemp.push(t);
			//}
		};
		var responses = {"questions":temp, "followups":followupsTemp};
		console.log(JSON.stringify(responses));
		$.post( "php/survey.php", {"action":"save", "userId":localStorage.getItem("userId"), "responses":JSON.stringify(responses)}, function(data) {
			// console.log(data);
			localStorage.setItem("didSurvey", true);
			window.location.href = "/";
		});
	});

	$(function(){
		$.post( "php/survey.php", {"action":"load", "userId":localStorage.getItem("userId")}, function(data) {
			//console.log(data);
			var survey = JSON.parse(data);
			for (var i = 0; i < survey.questions.length; i++) {
				var question = Object.keys(survey.questions[i])[0];
				var answer = survey.questions[i][question];
				if(question != "question3" && question != "question17") $("#"+question+answer).attr("checked", "checked");
				if(question == "question3") $("input[name=question3]").val(answer);
				if(question == "question17") $("input[name=question17]").val(answer);
			};

			for(var i = 0; i < survey.followups.length; i++){
				$("textarea").eq(i).val(survey.followups[i][Object.keys(survey.followups[i])[0]]);
			};
		});
	});
</script>
</html>